第四章

![image](images/frontdot.jpg)

选择网络应用而不是本地应用

对于任何梦想创建新应用程序的开发人员来说，首先必须考虑的一个问题是平台的选择:这个应用程序应该基于网络并考虑移动应用程序还是只支持 iPhone？是否有受众支持黑莓版本的应用程序，或者大多数人只会在笔记本电脑上使用这款应用程序？

本章旨在涵盖你在回答“web 应用还是原生应用？”时应该考虑的一些因素问题。然后，我们将在问答应用程序的上下文中回答这个问题，该应用程序将在本书的其余部分中构建。

为什么重要？

乍一看，这似乎是一个微不足道的决定，不值得思考。然而，这个决定将会影响一切，从你的应用如何编码(很明显)，到你如何赚钱(不太明显)，到如何维护。

在接下来的几页中，我们将探讨 web 和原生应用程序的优缺点，然后在我们将要构建的应用程序的上下文中应用两者的优缺点，这将帮助我们做出明智的决定，即哪种方法最适合我们的情况。

![image](images/sq.jpg) **注意**每个 app 都不一样，大多数想法都有不止一种有效的执行方法。本章中的决定和观点是作者积累的经验、偏见和偏好的结果，虽然它们可能不完全符合您自己的想法，但它们是创建简单有效的应用程序的一种方式。

要考虑的因素

根据您正在构建的内容，在决定您的应用程序应该使用本地技术还是 web 技术时，您需要考虑许多因素。然而，有些因素可以普遍适用于所有应用。我们将在这里讨论其中的一些。

了解你的用户

如果你正在开发一个应用程序，你真的需要确保你在开发的时候考虑到了你的目标用户。知道谁是你的用户会让你更好地理解你的应用程序需要运行的平台，平台可以公开的特性类型，以及你有潜力提供给你的用户的功能。用户的类型也可能设置功能期望的级别，但是我们在这里不包括人物角色 [<sup>1</sup>](#Fn1) 。

例如，如果您的用户极有可能拥有一部新的智能手机，您可以开始考虑使用更新的技术，并使用设备上的加速计或摄像头等高级功能。这也意味着你有潜力构建运行在现代移动浏览器上的丰富的交互式网络应用，以及本地的 iOS 和 Android 应用。

反过来，了解你的用户也将帮助你识别你真的不应该关注的事情；如果你知道你所有的用户都有一个黑莓手机，那么为 iPhone 开发一个应用程序就没有意义了(这真的不言而喻，但我们这么说只是为了说明这一点)。

同样值得考虑的是用户可能会在哪里使用您的应用程序。你可能有一个创新的新控制系统的计划，在这个系统中，用户通过设备摄像头监控的一系列星形跳跃与应用程序进行交互。但如果你的目标用户可能想在空间有限的火车上使用该应用程序，这不太可能是可行的。至少，他们会收到其他乘客很多奇怪的目光。

类似地，如果用户在一个连接受限的地方，应用就不应该依赖于从托管的 API 中检索数据。

营销

如果没有人会使用它，那么构建一个功能丰富的应用程序是没有意义的。因此，让潜在客户了解你的应用对它的成功至关重要。

使用 **marketplace** 代表着一个确保你的应用——你的产品——至少是可被发现的绝佳机会。在 iOS 设备的 App Store 和 Android 设备的 Google Play 上有超过 50 万个移动应用程序，这清楚地证明了市场是发现你的应用程序的好地方。微软紧随其后推出了 Windows 商店。但是，你当然可以争辩说，竞争如此激烈，实际上由于应用程序的大量选择，找到你的应用程序非常困难。

![image](images/sq.jpg) **注**苹果重新定义了*应用*的含义:从简单地代表一个在某些设备上运行的程序，到一个拥有蓬勃发展的生态系统的整体概念，包括小额支付，当他们创造了应用商店的概念。产品营销、销售和分销的市场:应用程序。这是一个惊人的营销成就。

除了可以被发现之外，出现在市场中意味着你的应用有机会从市场内审查系统中受益。理论是，如果你开发了一个很棒的应用，你会收到很好的评论，并从应用排行榜的飙升中受益。

Marketplaces 最初是为本地应用程序创建的，事实证明非常成功。这个想法被复制到网络应用程序中，但成功的几率要小得多。有人在努力改变这一点，比如谷歌 Chrome 网络商店、[<sup>2</sup>](#Fn2)Firefox market place、 [<sup>3</sup>](#Fn3) 脸书应用中心、 [<sup>4</sup>](#Fn4) 甚至是苹果的“网络应用”目录、 [<sup>5</sup>](#Fn5) 但这种吸收比他们的原生应用要慢得多。

然而，建立和控制的市场也有不利的一面。苹果因其对 App Store 中什么可以什么不可以的奇怪且有时完全独裁的控制而臭名昭著，这对应用程序开发者来说可能是一个巨大的路障。苹果的审批流程给应用开发者带来问题的最著名案例之一是谷歌语音，它在向应用商店提交其 iOS 应用时被拒绝 [<sup>6</sup>](#Fn6) 。

对谷歌来说幸运的是，网络应用程序可以绕过苹果的审批程序，允许用户从任何装有 HTML5 浏览器(iPhone 有)的设备上访问它们。谷歌把它的语音服务变成了一个网络应用，而苹果无法阻止它向用户提供这项服务[<sup>7</sup>T3】。](#Fn7)

![image](images/sq.jpg) **注意**苹果已经让步，现在允许谷歌语音在应用商店发布其应用。 [<sup>8</sup>](#Fn8) 

长期以来，产品成败的关键因素之一是强大的在线存在。由于网络应用存在于网上，它们自然会存在，并且可以通过自然搜索从搜索引擎的发现中受益。相比之下，本地应用程序必须创建一个全新的营销网站，或者简单地依赖 marketplace web 列表作为在线表示和自然发现的来源。

销售

一旦你的营销发挥了它的魔力，潜在客户即将转化为真正的用户，你就需要一个销售机制。即使你正在放弃你的申请，仍然有一个销售方面；用户需要承诺以某种方式使用你的应用程序(例如，注册或下载)。

这里首先要考虑的是信任。如果你已经创建了一个本地应用程序，并通过一个可信的市场进行销售——由一个大品牌如苹果、谷歌或微软支持——用户已经放心了，该应用程序已经作为市场提交过程的一部分被审查。此外，他们为应用程序进行的任何支付都是通过市场进行的，而不是直接通过应用程序或其他第三方支付系统。

web 应用程序不会受益于这种继承的信任。它需要通过看起来专业来建立信任；驻留在加密(SSL)连接上；并通过可信、可靠和专业的机制提供支付。消费者对在手机上输入信用卡信息犹豫不决，这种犹豫不是没有根据的:在触摸屏上填写表格并不容易，更难的是在填写时掏出信用卡。再加上有人可能在公共场合使用手机，输入财务信息就更没吸引力了。

因此，处理交易和安全存储支付细节的第三方支付提供商(如 PayPal、Square、Dwolla、GoCardless 等)发现他们的服务需求越来越大也就不足为奇了。尽管与这样的支付提供商集成变得越来越容易，但仍然需要额外的开发人员努力。

然而，本地应用通过各自的市场拥有内置的商业平台，允许预先定价购买应用、应用内购买、付费升级等。

这并不是说没有很多其他的方法来赚钱，无论是本地的还是非本地的，但这种讨论超出了本书的范围。

分配

付费或免费注册完成后，客户现在需要访问您的应用程序才能实际使用它。

原生应用程序市场提供了一个屡试不爽的下载机制，这也增加了实际购买东西的感觉。应用程序下载、安装、启动和运行速度非常快。

但不可否认的是，互联网正变得越来越适用于所有设备，而且这一趋势没有停止的迹象。因此，市场上的设备越来越多(从 iPhones 和 iPads 到亚马逊 Kindle Fire 运行 Android、BlackBerry、Windows Phone 等的智能手机)，这些智能手机的现代网络浏览器能够完成桌面浏览器所能完成的大部分工作。这为开发人员提供了一个独特的机会，否则他们需要创建许多本地应用程序来提供无处不在的支持，只需为所有设备创建一个 web 应用程序，通过导航到 web 浏览器中的 URL 即可立即使用。

在应用更新时，Web 应用程序提供了一个明显的优势。你不用等着用户花时间把你的应用程序更新到最新版本，你只需要在你的服务器上更新 web 应用程序，用户下次在线加载你的应用程序时就会得到新的版本。这是一个巨大的好处，特别是对于感受用户如何与一个新的应用程序交互；随着新功能的推出和旧错误的消除，最新和最棒的应用程序版本可以立即提供给用户群。

从用户的角度来看，通过支付升级费用，或者通过手动或自动升级，通过市场机制，可以相对容易地应用对原生应用的更新。然而，开发者必须向市场提交更新，并等待验证过程完成。这意味着简单或紧急的应用程序升级可能需要一段时间才能分发。

外观、感觉和性能

当开发一个本地应用程序时，该平台的外观和感觉经常被理解和很好地定义。虽然有 web 应用程序用户界面(UI)框架可用，但它们不会完全符合运行它们的平台的原生感觉。此外，每个平台的 UI 可能不同，这意味着在 web 应用程序中检测到这一点，并为每个平台维护不同的皮肤。即便如此，你也无法从一个 web 应用程序中控制浏览器 chrome，因此它永远不会与原生应用程序的外观完全一致。

但是，重要的是要记住，要试着去拥抱网络这个平台，并利用网络的优势。

这是一个笼统的说法，当然也有例外，但因为本地应用通常是基于设备的本地语言构建的，所以它们通常会感觉更流畅一些。

从启动本地应用程序的过程开始:在本地应用程序中，你找到应用程序的图标，点击它，它就启动了。对于 web 来说，这是不同的，有点复杂；首先打开浏览器应用程序，然后导航到一个 URL 或打开一个书签。如果你正在使用多个网络应用程序，那么你也需要在标签之间切换应用程序。这导致用户使用 web 应用程序时的体验不如使用本地应用程序时那么流畅。

因为 web 应用程序不是本地运行的，所以跳转、停顿、停顿和其他故障的风险更高，这些故障往往会降低用户体验的质量。这并不是说您不会在原生应用程序中实现这一点，但是当在浏览器应用程序(它本身运行在操作系统上)中运行 web 应用程序时，有一个额外的层有可能导致问题。

由于这个原因，web 应用程序在不降低性能的情况下可以添加的华丽的附加功能的数量上更加有限。

浏览器供应商、HTML5 框架、 [<sup>9</sup>](#Fn9) 和初创公司 [<sup>10</sup>](#Fn10) 已经取得了一些重大进展，以应对这种性能冲击，情况只会有所改善。但是，在某些情况下，如密集型游戏，原生仍将是最好的解决方案。

发展

尽管我们已经触及了一些影响开发人员的因素，但是我们应该更多地关注那些能够影响开发的因素。因此，当考虑“web v native”时，让我们更深入地挖掘一些真正影响开发应用程序的因素

语言和平台

HTML5 正在成为跨平台开发技术的首选。尽管不是严格意义上的语言，HTML5 包括用于视图标记的 HTML、用于视图样式和动画的 CSS 以及用于应用程序逻辑的 JavaScript。如果你使用其中的一种，你很可能也会使用其他的。

如前所述，web 应用程序可以在任何装有支持该应用程序所用技术的 web 浏览器的设备上使用。今天的大多数智能手机都有支持 HTML5、CSS3 和 JavaScript 的 web 浏览器。最重要的是，市场上“傻瓜手机”的比例正在迅速下降(此外，傻瓜手机也不倾向于提供特别有趣的本地应用，所以它们是一个有争议的问题)。

当开发移动或平板电脑的 web 应用程序时，而不仅仅是桌面，唯一增加的负担是考虑移动设备呈现的新屏幕尺寸。大多数网页设计的常见技术，如 HTML5 和 CSS3，都受到大多数移动设备的支持，这意味着在旧版本的 Internet Explorer 上运行应用程序的所有功能可能比在移动浏览器上运行更困难。

软件开发中一个非常强有力的原则由首字母缩略词 *DRY* 代表，它是“不要重复自己”的缩写。通过专注于构建一个单一的响应式网络应用将所有支持的平台整合到一个集中的代码库，这是向干式应用迈出的一大步。

有 PhoneGap [<sup>11</sup>](#Fn11) 和 Trigger.io [<sup>12</sup>](#Fn12) 等平台旨在将一个 web app 做成各种平台专用的 app。诸如此类的工具的存在证明了本地应用程序的市场和学习如何为不同平台编码的困难。微软甚至创建了一个名为 WinRT， [<sup>13</sup>](#Fn13) 的应用架构，允许应用程序在 HTML5 中开发，使原生 Windows 8 应用程序和 web 应用程序使用相同的代码库成为可能。

如果你决定专注于构建本地应用，你很可能会专注于 iOS 设备的 Objective-C，Android 的 Java，以及 Windows 设备的 WinRT 支持语言。学习一门新的编程语言是一件很棒的事情，但是对于一个不知道为给定平台选择哪种语言的开发人员来说，这确实会增加几天甚至几周的开发时间。

如果您的原生应用程序是为一个被另一个平台取代的平台开发的，您别无选择，只能为新系统重新构建应用程序。比如，任何为 Symbian 开发的应用都在迅速变得无关紧要，任何 Windows Phone 7 应用都无法升级到 Windows Phone 8；它们必须被重建。

这带来了风险，因为原生应用程序受其构建平台的影响很大。如果由于一些反常的事情发生，苹果突然关闭了应用商店，开发者将没有追索权或快速修复；他们将不得不重新开始，为另一个平台开发他们的应用程序，或者干脆放弃，去做别的事情。

维护

维护一个本机应用程序可能与维护一个 web 应用程序差不多(甚至更简单，取决于平台)。当面对多平台应用程序时，维护问题就出现了:如果一个应用程序需要在 iOS、Android、黑莓和 Windows Phone 上运行，它就会变成四个。突然之间，大多数维护都乘以 4，这甚至没有考虑基于网络的配套工具或应用程序的 web 应用程序版本的强烈可能性。

最重要的是，更新必须由用户下载，所以除了市场提示、你的鼓励和支持文档中的注释，没有什么可以保证用户能够获得最新版本的应用程序。

对于 web 应用程序，无需对该应用程序的 Android、iOS、BlackBerry 和 Windows Phone 版本进行修复，只需更新一个版本的代码(假设该应用程序是为响应而构建的)即可清理该应用程序设计的任何设备上的问题。

测试

当创建一个 web 应用程序时，努力创建一个“一刀切”的应用程序。因此，它需要对所有需要支持的设备进行认真的测试。理想情况下，它甚至应该跨每个平台的不同版本进行测试。

原生应用提出了与测试网站跨浏览器支持类似的问题:iPhone 的修复可能会在 Android 上引入新的错误，一个版本的 Android 的变化可能会在另一个版本的 Android 上产生意想不到的副作用，并且总有可能某个功能不能在每个设备上以相同的方式工作。

功能支持

如果你的应用需要访问设备的加速度计或摄像头，那么争论就结束了，除非你确切知道你的用户将在他们的手机上使用什么浏览器。例如，要从浏览器访问设备上的网络摄像头，你需要使用`getUserMedia` API，即使是主流浏览器的最新版本也不支持它； [<sup>14</sup>](#Fn14) 一如既往，Chrome、Firefox、Opera 一路领先。

如果你不知道你的 web 应用程序的所有用户是否都支持它*需要的所有特性*，你最好的选择是创建一个本地应用程序。

操作系统向本机应用程序公开对大多数硬件功能的访问。浏览器正在慢慢地公开对这些特性的访问，但是它们仍然不能跨浏览器使用。一个这样的例子是方向控制。在某些应用程序中，您可能总是希望用户以横向模式查看，例如，一个赛车游戏，但是尽管有检测方向初始状态和变化的方法，但目前在 web 浏览器中没有 API 来控制这一点，所以唯一的解决方案是有效的黑客攻击。 [<sup>十五</sup>](#Fn15)

现代移动 web 浏览器在不断发展，提供 API 来访问硬件和其他操作系统功能的浏览器的数量也在不断增加。但是现在，本机应用程序具有优势，因为它提供了对应用程序可以访问的硬件和操作系统功能的完全控制。

连通性

我们生活在一个联系越来越紧密的世界，所以很多应用程序依赖于连接也就不足为奇了。

为了最初获取我们的本地或 web 应用程序，我们需要一个互联网连接。应用程序提供的许多功能也需要连接，例如任何利用其他互联网服务或 API 的功能(例如:公共交通应用程序，在待办事项或笔记应用程序(如 EverNote)等设备之间同步信息的功能，或地图应用程序，这些应用程序绝不能存储用户可能请求的所有信息)。

其中一些应用程序，如 EverNote，在离线时仍然可以提供有用的功能。但其他公司，如 Skype，没有连接就无法提供任何核心功能。他们还不如拒绝开门。

一旦本机应用程序下载到您的设备上，所有资源(至少在大多数情况下)现在都存储在设备上，这意味着它应该可以离线使用。但是许多应用程序假定连接性会导致非常令人沮丧的用户体验。

这种情况没有真正的原因，web 应用程序也是如此。HTML5 有定义良好的离线支持， [<sup>16</sup>](#Fn16) 包括应用程序文件缓存和本地存储，所以在开发人员的关心下，有一个工作的离线 web 应用程序是可能的，就像本地应用程序应该离线工作一样。

根据需求选择

鉴于本地应用和网络应用各有利弊，很明显，在为应用选择平台时，没有明确的正确答案。有太多的因素影响了这个或那个仅仅是“更好”的决定。

相反，应用程序开发人员应该花合理的时间考虑他们的应用程序，它将如何使用，它将做什么，以及他们打算如何赚钱。在他们弄清楚需求后，他们可以通过前面列出的利弊来运行他们的应用程序，以及针对他们的情况的任何其他考虑，并选择最有利于他们的应用程序的*方法。*

选择网络应用而非本地应用

对于您的应用程序项目，让我们根据之前的利弊来权衡应用程序的拟议功能，以针对这种情况做出最佳决定。

这个应用程序是做什么的？

虽然我们将在下一章中更深入地了解这一点，但这个应用程序提供了一个简单的界面，让观众可以向演示者提问，演示者也可以实时接收这些问题。

这个 App 是怎么赚钱的？

出于本书的目的，该应用程序*不赚钱，但如果它将被货币化，不太可能有人会愿意支付 0.99 美元来问一个他们可以简单举手的问题。*

向演示者收费来创建一个房间可能更有意义，因为该应用程序可以帮助他们控制房间，并确保所有问题都得到回答。主持人可能会在布置房间之前购买房间，这在桌面浏览器上最容易做到，因此通过网络界面付款可能不会成为一个障碍。

人们将如何使用这个应用程序？

据推测，用户将在演示者举办活动的物理空间中。这可能是一所大学的教室，一个会议的会议室，或者一个大公司的主题演讲的会议室。

因为与会者很可能不在办公桌前，所以可以安全地假设她可能会使用笔记本电脑、平板电脑或手机与发言者进行互动，因此该应用程序应该支持尽可能多的设备。

这个应用程序需要访问任何设备硬件吗？

该应用程序不需要访问用户的任何手机硬件，如相机，所以这不是你需要为这个项目担心的事情。

最后的决定是:让我们构建一个 Web 应用程序

鉴于这款应用不需要访问设备硬件或收取访问应用的费用，鉴于用户群不可预测地使用任何特定设备，并且观众与演示者之间的通信绝对需要互联网连接，因此将我们的应用构建为 web 应用是最有意义的。

摘要

在这一章中，你学习了构建本地应用程序和 web 应用程序的优点和缺点。因为没有正确或错误的答案，应用程序开发人员需要单独考虑每个项目，以确定哪种方法对他们最有利。

在下一章，我们将进入应用程序的细节，以确保在我们开始编码之前，我们所有的鸭子都在一条线上。

[<sup>1</sup>](#_Fn1)T0】

[<sup>2</sup>](#_Fn2)T0】

[<sup>3</sup>](#_Fn3)T0】

[<sup>4</sup>](#_Fn4)T0】

[<sup>5</sup>](#_Fn5)T0】

[<sup>6</sup>](#_Fn6)T0】

[<sup>7</sup>](#_Fn7)T0】

[<sup>8</sup>](#_Fn8)T0】

[<sup>9</sup>](#_Fn9)T0】

[<sup>10</sup>](#_Fn10)T0】

[<sup>11</sup>](#_Fn11)T0】

[<sup>12</sup>](#_Fn12)`https://trigger.io/`[<sup>13</sup>](#_Fn13)`http://en.wikipedia.org/wiki/Windows_Runtime`

[<sup>14</sup>](#_Fn14)T0】

[<sup>15</sup>](#_Fn15)T0】

[<sup>16</sup>](#_Fn16)T0】