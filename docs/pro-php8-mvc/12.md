# 12.发布您的代码

是时候说说我们的框架做出来之后会发生什么了。写代码只是开始。难的是让人们使用它，并保持它的新鲜和有用。

我认为，在我乐意将它投入使用之前，通过谈论我仍然希望对我们的框架和示例应用程序做些什么，将有助于构建这部分内容…

## 收尾

每个流行的框架都有一个初学者工具包。这些是您可以复制、克隆或安装的项目，以便了解代码是如何工作的。这些初学者工具包是新应用程序的起点。它们应该是有帮助的和容易理解的。

考虑到这一点，在向全世界发布之前，我想补充一些东西。

### #1:有用的主页

让主页更有帮助。用户看到的第一页应该让他们放心，一切都设置正确，这样他们就可以开始开发了。应该有文档和其他有用资源的链接(比如托管和调试选项)。

![../images/299823_2_En_12_Chapter/299823_2_En_12_Figa_HTML.jpg](../images/299823_2_En_12_Chapter/299823_2_En_12_Figa_HTML.jpg)

Laravel 的有用主页

这是你启动 Laravel 的开发服务器时看到的第一个东西。要看到这一点，您只需要三个命令:

```php
composer create-project laravel/laravel my-new-project
cd my-new-project
php artisan serve

```

从一个新的框架开始可能是一项艰巨的任务，所以这有很大的不同。“让事情运转起来”不需要任何配置如果您想开始使用模型(或其他数据库功能)，那么您需要设置一个数据库。

通过默认配置 SQLite，这可能会简单一点。那么新用户不需要配置任何东西就可以使用框架 80%的功能。

### #2:更多功能示例

我们构建了如此多的功能，但在示例应用程序中展示的却很少。这里有一些使用会话和缓存的小例子。没别的了。

即使这些例子被注释掉了，显示做普通事情的适当时间和方式仍然是有用的。我们可以展示如何发送电子邮件或在队列中做一些事情，或者如何将文件放在远程文件系统中。

这就是教程和好的文档做了大量繁重工作的地方。说到这个…

### #3:良好的文档

好的文档(或缺少文档)是其他开发人员对你的框架的第一个也是最大的抱怨。他们想知道如何使用这个框架，如何配置它，在哪里支持它，以及它的局限性是什么。

你的文档可以有很大的范围。Laravel 简洁明了，专注于功能的关键部分。Laravel 社区(以及一般的 PHP 社区)擅长以书面和视频教程的形式填补空白。

另一方面，Symfony 拥有大量的文档，有些人可能会发现这些文档在数量和具体性方面令人应接不暇。关于如何使用 Symfony 组件，我从未有过文档中没有回答的问题。

关键是要给出足够的信息，说明你期望组件如何被最常用，并有链接指向好的社区资源，以进行专门的使用、优化和扩展。

我使用的第一个 PHP 框架是 CodeIgniter。(在写作的时候)它仍然活蹦乱跳，对我的职业生涯影响很大。不是因为它有最好的代码或最大的社区，而是因为文档告诉了我学习如何使用这个框架所需要知道的一切。

![../images/299823_2_En_12_Chapter/299823_2_En_12_Figb_HTML.jpg](../images/299823_2_En_12_Chapter/299823_2_En_12_Figb_HTML.jpg)

CodeIgniter 2 文档目录

最近的版本取消了“介绍”，但我想现在有更多的方法来了解这些主题。

### #4:完成测试

开发人员的另一个大问题(也是理所当然的)是，当一个新的框架出现时，没有一个全面有效的测试套件。如果你想发布一个新的框架，确保你有 90–100%的功能被自动化测试覆盖。

你不需要测试第三方代码，但是你应该测试你连接和使用它的方式。

即使使用正确的工具，测试也可能是一门很难学的学科，但是这不是你想要的捷径。参加相关课程或阅读相关书籍:

*   [试驾拉勒维尔-亚当·瓦森](https://course.testdrivenlaravel.com)

*   [PHPUnit:用 Bite 测试–symfony casts](https://symfonycasts.com/screencast/phpunit)

*   [*《暴躁的程序员测试 PHP 应用指南》*——克里斯·哈特杰斯](https://t.co/D6QRdh6dDC%253Famp%253D1)

### #5:确保这是你想做的事情

构建一个框架很难，但这是旅程中最容易的部分。如果你做得好的话，多年来维护一个框架会占据你生活的大部分时间。

您最好从不同的框架中取出许多较小的部分，并将它们组合成对您的目的有帮助的东西。

或者，更好的是，自己学习如何使用一个流行的、受到良好支持的框架。这些我们会在后记里多讲。

## 使用 Packagist

在本书中，我们已经使用 Composer 安装了许多库。这些库都托管在一个名为 Packagist 的网站上。如果您希望您的框架(或单个库)可以通过 Composer 安装，您需要将它提交给 Packagist。

如果您还没有，请创建一个帐户。如果您使用 GitHub 托管您的代码，您也可以使用 GitHub 登录 Packagist。

![../images/299823_2_En_12_Chapter/299823_2_En_12_Figc_HTML.jpg](../images/299823_2_En_12_Chapter/299823_2_En_12_Figc_HTML.jpg)

使用 GitHub 登录

您的库需要有一个定义良好的`composer.json`文件。我不想深入探讨这个问题的细节，因为它本身就是一门艺术。

如果你现在想知道如何发布你自己的包，那就去看看像 [PHP 包开发](https://beyondco.de/video-courses/php-package-development)这样的视频课程。它涵盖了关于`composer.json`规范的细节，以及如何很好地构建独立的 Composer 包。

完整的`composer.json`规范需要花相当多的时间来理解，您可以在 Composer 文档网站上找到它。

一旦你完成了一个，通过 Packagist 的提交表格提交。

![../images/299823_2_En_12_Chapter/299823_2_En_12_Figd_HTML.jpg](../images/299823_2_En_12_Chapter/299823_2_En_12_Figd_HTML.jpg)

提交包

然后，你(或其他任何人)将能够通过一个`composer require`终端命令来安装你的库。这就是事情的全部。

## 摘要

如果你不记得这一章的其他内容，就让它这样吧:维护一个框架是一项艰苦的工作。构建一个框架是一个必经之路，也是了解它们如何工作的好方法，但是拥有一个框架是一个重大的决定。这不是一项容易的任务。

希望这一章已经让你看到了一些等待你的挑战和你应该考虑的事情。我会在这本书的后记中见到你。