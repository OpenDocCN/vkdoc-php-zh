# 二十二、MySQL 简介

MySQL 关系数据库服务器诞生于大约 22 年前的一个公司内部项目，由一家瑞典软件公司的员工开发。他们的项目被称为 MySQL，于 1996 年底首次向公众发布。事实证明，这款软件非常受欢迎，以至于他们在 2001 年成立了一家新公司，专门提供 MySQL 服务和产品。在接下来的十年中，MySQL 在教育机构、政府机构、小型企业和财富 500 强公司中的采用率如此之高，以至于 MySQL 背后的公司在 2008 年被 Sun Microsystems 以近 10 亿美元的价格收购，该公司又在 2009 年初被 Oracle Corporation 收购。这是一个相当惊人的成功故事！那么，到底是什么让 MySQL 的产品如此吸引人呢？

一个特别的原因是开发团队的历史思维。从第一次公开发布开始，MySQL 的开发人员就特别强调速度和可伸缩性，这两个特性对全球的开发人员来说非常有吸引力，因为他们对构建高性能的网站很感兴趣。然而，这些优势是有代价的，因为 MySQL 是一个高度优化的产品，缺少许多被认为是企业数据库产品标准的特性:例如，存储过程、触发器和事务。然而，该产品吸引了大量用户的注意，他们对速度和可伸缩性更感兴趣，而不是在许多情况下经常被闲置的功能。后来的版本最终增加了这些功能，吸引了更多的用户。

根据 MySQL 网站，该产品已被下载超过 1 亿次。该数据库的用户包括世界上许多行业中一些最知名的公司和组织，包括 YouTube、PayPal、网飞和脸书( [`www.mysql.com/customers`](http://www.mysql.com/customers) )。在这一章的后面，我将仔细看看这些用户是如何使用 MySQL 的，在某些情况下，在这个过程中节省了数百万美元。

## 是什么让 MySQL 如此受欢迎？

MySQL 是一个关系数据库服务器，它提供了与竞争产品相同的特性。换句话说，如果您熟悉另一个数据库产品，就不会遇到太多意外。除了众所周知的方便定价选项(具体来说，它在很多情况下都是免费的)，MySQL 的什么地方让它如此受欢迎呢？这一节重点介绍了一些有助于其人气飙升的关键特征。

### 灵活性

无论你运行的是什么操作系统，MySQL 都有可能覆盖你。在 MySQL 网站上，您会找到适用于 14 个平台的优化二进制文件:康柏 Tru64、DEC OSF、FreeBSD、IBM AIX、惠普 UX、Linux、Mac OS X、Novell NetWare、OpenBSD、QNX、SCO、SGI IRIX、Solaris(版本 8、9 和 10)和 Microsoft Windows。软件包也适用于 Red Hat、SUSE 和 Ubuntu。此外，如果您的平台没有二进制文件，或者如果您想自己执行编译，MySQL 会提供源代码供下载。

各种 API 也适用于所有最流行的编程语言，包括 C、C++、Java、Perl、PHP、Ruby 和 Tcl。

MySQL 还提供了许多类型的数据管理机制，称为*存储引擎*。谨慎选择特定存储引擎的重要性类似于为特定任务使用适当算法的重要性。像算法一样，存储引擎特别擅长某些任务，但可能不适用于其他任务。MySQL 很早就支持几个引擎，其中几个在第 26 章[中有介绍。](26.html)

尽管 MySQL 默认使用英语兼容的设置，但它的开发者认识到并非所有用户都来自英语国家，因此 MySQL 允许用户从超过 35 个字符集中进行选择。您可以使用这些字符集来控制错误和状态消息使用的语言、MySQL 如何对数据进行排序以及数据如何存储在表中。

### 力量

从最早的版本开始，MySQL 开发人员就一直关注性能，即使是以减少特性集为代价。直到今天，对非凡速度的承诺没有改变，尽管随着时间的推移，以前缺乏的能力已经发展到可以与许多商业和开源竞争对手相媲美。本节简要介绍了该产品的一些更有趣的性能和特性相关的特征。

#### 企业级 SQL 特性

正如本章介绍中提到的，MySQL 有一段时间缺乏高级特性，比如子查询、视图和存储过程。但是，这些特性(以及更多特性)是在以后的版本中添加的，这使得数据库在企业环境中的应用越来越多。本书随后的几章将专门介绍这些相对较新的特性。

#### 全文索引和搜索

MySQL 长期以来一直支持全文索引和搜索，这些功能极大地增强了从基于文本的列中挖掘数据的性能。此功能还使您能够根据查询与行的索引文本列的匹配程度，按相关性顺序生成结果。该功能在第 [33 章](33.html)中介绍。

#### 查询缓存

查询缓存是 MySQL 最大的速度提升之一。启用时，查询缓存简单而高效，允许 MySQL 在内存中存储选择查询及其相应的结果。随着后续查询的执行，MySQL 会将它们与缓存的查询进行比较；如果匹配，MySQL 将放弃代价高昂的数据库检索，转储缓存的查询结果。为了消除过时的结果，机制可用于自动移除无效的缓存结果，并在下一次请求时重新缓存它们。

#### 分身术

复制允许位于一个 MySQL 服务器上的数据库被复制到另一个服务器上，这提供了很多优点。例如，只要有一个复制的数据库就可以大大提高可用性，因为如果主数据库出现问题，它可以立即联机。如果有多台机器供您使用，客户机查询可以分布在主服务器和多个从服务器上，从而大大减少了单台机器上的负载。另一个优势涉及备份；在备份完成时，您不必让应用离线，而是可以在从属服务器上执行备份，从而避免任何停机时间。

#### 配置和安全性

MySQL 拥有大量的安全和配置选项，使您能够完全控制其操作的几乎每一个可以想象的方面。例如，使用 MySQL 的配置选项，您可以控制如下功能:

*   守护进程所有者、默认语言、默认端口、MySQL 数据存储的位置以及其他关键特征。

*   分配给各种 MySQL 资源(如查询缓存)的内存量。

*   MySQL 网络功能的各个方面，包括在中止之前它将尝试执行连接多长时间，它是否将尝试解析 DNS 名称，允许的最大数据包大小等等。

此外，MySQL 跟踪关于数据库交互的所有方面的许多指标，例如总的传入和传出字节数；执行的每个查询类型的计数；以及打开、运行、缓存和连接的线程总数。它还跟踪超过特定执行阈值的查询数量、存储在缓存中的查询总数、正常运行时间等等。这些数字对于在服务器的整个生命周期中不断调整和优化服务器来说是无价的。

MySQL 的安全选项同样令人印象深刻，允许您管理如下特征:

*   对于给定的数据库、表甚至列，用户可以执行哪些操作。例如，您可能允许用户对公司雇员表的电子邮件列拥有更新权限，但拒绝删除权限。

*   每小时允许的查询、更新和连接的总数。

*   用户是否必须提供有效的 SSL 证书才能连接到数据库。

由于这些选项的重要性，在接下来的章节中会反复提到它们。具体来说，第 [23](23.html) 章的一部分致力于 MySQL 的配置，第 [26](26.html) 章的全部致力于 MySQL 的安全性。

### 灵活的许可选项

MySQL 提供了两个许可选项，这两个选项都将在本节中介绍。

#### MySQL 开源许可证

Oracle 根据 GNU 通用公共许可证(GPL)条款提供其软件的免费社区版本。如果您在自己的服务器上下载和使用该软件，与付费许可证相比，这不会给您任何超出社区版本限制的限制。如果您决定开发和销售包含 MySQL 的 GPL 许可部分的软件，您将被要求在相同的许可下发布您的软件或支付商业许可。在 [`https://www.fsf.org/licensing/licenses/gpl.html`](https://www.fsf.org/licensing/licenses/gpl.html) 了解更多关于 GPL 条款的信息。

认识到并非所有用户都希望在 GPL 的限制性条款下发布他们的软件，MySQL 也可以作为 Oracle cloud 中的云服务使用，他们提供企业版。

#### 标准、企业和云许可证

MySQL 目前提供三种商业许可，分别叫做标准、企业和云。这些将提供附加功能和支持以及产品升级的组合。完整的特性列表可以在这里找到: [`https://www.mysql.com/products/`](https://www.mysql.com/products/) 。

#### 您应该使用哪种许可证？

当你读这本书的时候，你很可能是一个正在为你自己或者你工作的公司构建应用的开发者。在大多数情况下，开源许可证将是你所需要的。另一方面，如果您需要访问一些更高级的功能，如热备份或加密和压缩，或者您计划开发一个嵌入 MySQL 的产品，您将不得不考虑一个商业许可证，或者在与您必须投资的 MySQL 开源版本相同的 GPL 许可证下许可整个软件

## 杰出的 MySQL 用户

如前所述，MySQL 拥有相当多的杰出用户。我选择了两个更引人注目的实现来提供 MySQL 如何帮助您的组织的额外见解。

### 克雷格列表（网站名）

自 1995 年成立以来，广受欢迎的在线分类广告和社区网站 craigslist ( [`https://www.craigslist.org`](https://www.craigslist.org) )一直在不断扩张。craigslist 网站从一开始就依赖于各种开源产品，包括 LAMP (Linux、Apache、MySQL、Perl)栈(参见 [`https://www.craigslist.org/about/thanks`](https://www.craigslist.org/about/thanks) 了解该公司使用的著名开源产品列表)。这个软件为一个负责发布超过 1 亿条分类广告和每月惊人的 500 亿次页面浏览的社区提供了动力( [`https://www.craigslist.org/about/factsheet`](https://www.craigslist.org/about/factsheet) )！

### 推特

短短几年间，Twitter 已经发展到像可口可乐和麦当劳一样无处不在，事实上，其数亿用户中的许多人认为这项服务像食物和水一样不可或缺。MySQL 在消息服务每秒存储数万条推文的能力中发挥了关键作用，每天的消息总数达到惊人的 5 亿条。 <sup>[1](#Fn1)</sup> 性能是如此重要，该公司甚至还维护了自己的 MySQL 开发分支，可通过 GitHub: [`https://github.com/twitter/mysql`](https://github.com/twitter/mysql) 获得。

当然，这种规模的基础设施依赖于多种技术，MySQL 只是用于支持该服务的几种存储解决方案之一。其他存储技术包括 Cassandra ( [`https://cassandra.apache.org/`](https://cassandra.apache.org/) )和 Hadoop ( [`https://hadoop.apache.org`](https://hadoop.apache.org) /)。

### 开源代码库

GitHub 使用 MySQL 和 Rails 应用的组合为其用户提供基础设施和服务。GitHub 还开发了开源应用，可以帮助用户进行模式迁移(gh-ost)。你可以在这里阅读更多关于 GitHub 的故事: [`https://www.mysql.com/customers/view/?id=1265`](https://www.mysql.com/customers/view/?id=1265) 。

### 其他主要用户

MySQL 网站提供了一系列以知名 MySQL 用户( [`https://mysql.com/why-mysql/case-studies/`](https://mysql.com/why-mysql/case-studies/) )为特色的案例研究，其中包括威瑞森无线、沃尔玛、Anritsu 和 Zappos。考虑花些时间仔细阅读这些摘要，因为它们可以作为游说您的组织在企业中采用 MySQL 的有用武器。

## Maria db:MySQL 的替代品

在 MySQL 被 Sun Microsystems 以及后来的 Oracle(数据库市场的竞争对手)收购后，一些核心开发人员觉得他们已经减少了对产品方向和功能的影响，因此他们创建了产品的“分支”。它被命名为 MariaDB。它被迅速采用，主要是因为它与原始产品非常兼容，但也因为它在某些情况下提供了更好的性能。随着这两种产品的发展，它们之间的差距可能会越来越大，从一种产品移植到另一种产品可能会变得更加困难。

许多 Linux 发行版现在默认提供 MariaDB 版本，用户必须使用特殊的下载选项来安装原生 MySQL 版本。

MySQL 安装的另一个替代项目是 Percona 服务器项目( [`https://www.percona.com/software/mysql-database/percona-server`](https://www.percona.com/software/mysql-database/percona-server) )，它也是由前 MySQL 开发人员重新创建的。

## 摘要

从内部项目到全球竞争对手，MySQL 自诞生以来确实走过了漫长的道路。这一章简要概述了 MySQL 的发展历程，详细介绍了 MySQL 的历史、进步和未来。还展示了数千个成功用户案例中的几个，突出了 MySQL 在具有全球影响力的组织中的使用。

在接下来的章节中，您将进一步熟悉许多 MySQL 基础主题，包括安装和配置过程、许多 MySQL 客户端、表结构和 MySQL 的安全特性。如果您是 MySQL 的新手，那么这些资料对于快速了解这个强大的数据库服务器的基本特性和行为是非常宝贵的。如果你已经非常熟悉 MySQL，尽管如此，还是要考虑浏览这些资料；至少，它应该是一个有用的参考。

<aside class="FootnoteSection" epub:type="footnotes">Footnotes [1](#Fn1_source)

[`https://en.wikipedia.org/wiki/Twitter`](https://en.wikipedia.org/wiki/Twitter)

 </aside>